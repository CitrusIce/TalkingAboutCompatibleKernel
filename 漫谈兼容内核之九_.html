
<!-- saved from url=(0098)https://web.archive.org/web/20160504113310/http://www.longene.org/techdoc/0750005001224576724.html -->
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:st1="urn:schemas-microsoft-com:office:smarttags" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv="Content-Type" content="text/html; charset=gb18030"><script src="./漫谈兼容内核之九__files/analytics.js.下载" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app225.us.archive.org';v.server_ms=449;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./漫谈兼容内核之九__files/bundle-playback.js.下载" charset="utf-8"></script>
<script type="text/javascript" src="./漫谈兼容内核之九__files/wombat.js.下载" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://www.longene.org:80/techdoc/0750005001224576724.html","20160504113310","https://web.archive.org/","web","/_static/",
	      "1462361590");
</script>
<link rel="stylesheet" type="text/css" href="./漫谈兼容内核之九__files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./漫谈兼容内核之九__files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->


<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 11">
<meta name="Originator" content="Microsoft Word 11">
<link rel="File-List" href="https://web.archive.org/web/20160504113310/http://www.longene.org/techdoc/0750005001224576724.files/filelist.xml">
<title>漫谈兼容内核之九:</title>
<style>hcfy-result.__hcfy__result__loaded__.__hcfy__result__both__{border: 1px dotted}</style></head><body lang="ZH-CN" style="tab-interval:21.0pt;text-justify-trim:punctuation"><o:smarttagtype namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="chmetcnv">
<o:smarttagtype namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="place">
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>tt</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>SYSTEM</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>6016</o:TotalTime>
  <o:Created>2008-10-21T08:12:00Z</o:Created>
  <o:LastSaved>2008-10-21T08:12:00Z</o:LastSaved>
  <o:Pages>14</o:Pages>
  <o:Words>3854</o:Words>
  <o:Characters>21968</o:Characters>
  <o:Lines>183</o:Lines>
  <o:Paragraphs>51</o:Paragraphs>
  <o:CharactersWithSpaces>25771</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:HideSpellingErrors/>
  <w:ActiveWritingStyle Lang="ZH-CN" VendorID="64" DLLVersion="131077"
   NLCheck="1">1</w:ActiveWritingStyle>
  <w:ActiveWritingStyle Lang="EN-US" VendorID="64" DLLVersion="131077"
   NLCheck="1">1</w:ActiveWritingStyle>
  <w:ActiveWritingStyle Lang="EN-US" VendorID="64" DLLVersion="131078"
   NLCheck="1">1</w:ActiveWritingStyle>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:SelectEntireFieldWithStartOrEnd/>
   <w:UseWord2002TableStyleRules/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:隶书;
	panose-1:2 1 5 9 6 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:"\@隶书";
	panose-1:2 1 5 9 6 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:1;
	tab-stops:144.0pt;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:1.0pt;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:20523359;
	mso-list-type:hybrid;
	mso-list-template-ids:-698600304 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1
	{mso-list-id:48769839;
	mso-list-type:hybrid;
	mso-list-template-ids:1224260682 -738544912 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l1:level1
	{mso-level-tab-stop:60.0pt;
	mso-level-number-position:left;
	margin-left:60.0pt;
	text-indent:-18.0pt;}
@list l2
	{mso-list-id:111941902;
	mso-list-type:hybrid;
	mso-list-template-ids:-865035374 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l3
	{mso-list-id:244842798;
	mso-list-type:hybrid;
	mso-list-template-ids:-395799204 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l4
	{mso-list-id:644705380;
	mso-list-type:hybrid;
	mso-list-template-ids:-259893216 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l5
	{mso-list-id:973951326;
	mso-list-type:hybrid;
	mso-list-template-ids:493242828 -738544912 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l5:level1
	{mso-level-tab-stop:60.0pt;
	mso-level-number-position:left;
	margin-left:60.0pt;
	text-indent:-18.0pt;}
@list l6
	{mso-list-id:984162804;
	mso-list-type:hybrid;
	mso-list-template-ids:2021138838 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l7
	{mso-list-id:1004359038;
	mso-list-type:hybrid;
	mso-list-template-ids:1363475660 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l8
	{mso-list-id:1078677497;
	mso-list-type:hybrid;
	mso-list-template-ids:-1959094908 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l8:level1
	{mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l9
	{mso-list-id:1748527192;
	mso-list-type:hybrid;
	mso-list-template-ids:-1796572130 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l10
	{mso-list-id:1780830494;
	mso-list-type:hybrid;
	mso-list-template-ids:863028420 -2143931400 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l10:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:81.0pt;
	mso-level-number-position:left;
	margin-left:81.0pt;
	text-indent:-18.0pt;}
@list l11
	{mso-list-id:2146005750;
	mso-list-type:hybrid;
	mso-list-template-ids:938895032 -738544912 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l11:level1
	{mso-level-tab-stop:81.0pt;
	mso-level-number-position:left;
	margin-left:81.0pt;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->


<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
</div><div id="wm-ipp-print">The Wayback Machine - https://web.archive.org/web/20160504113310/http://www.longene.org:80/techdoc/0750005001224576724.html</div>
<script type="text/javascript">
__wm.bt(675,27,25,2,"web","http://www.longene.org/techdoc/0750005001224576724.html","20160504113310",1996,"/_static/",["/_static/css/banner-styles.css?v=fantwOh2","/_static/css/iconochive.css?v=qtvMKcIJ"], false);
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div class="Section1" style="layout-grid:15.6pt">

<p class="MsoNormal" align="center" style="text-align:center"><b><span style="font-size:18.0pt;mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
隶书;mso-hansi-font-family:&quot;Times New Roman&quot;">漫谈兼容内核之九</span></b><b><span lang="EN-US" style="font-size:18.0pt;mso-bidi-font-size:12.0pt;font-family:隶书;
mso-fareast-font-family:宋体">:</span></b><b><span lang="EN-US" style="font-size:
22.0pt;mso-bidi-font-size:12.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="center" style="text-align:center"><b><span lang="EN-US" style="font-size:22.0pt;mso-bidi-font-size:12.0pt">ELF</span></b><b><span style="font-size:22.0pt;mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像的装入</span></b><b><span lang="EN-US" style="font-size:22.0pt;mso-bidi-font-size:12.0pt">(</span></b><b><span style="font-size:22.0pt;mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">二</span></b><b><span lang="EN-US" style="font-size:22.0pt;mso-bidi-font-size:12.0pt">)</span></b><span lang="EN-US" style="font-size:16.0pt;mso-bidi-font-size:12.0pt"><o:p></o:p></span></p>

<p class="MsoNormal" align="center" style="text-align:center"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">毛德操</span></p>

<p class="MsoNormal" align="center" style="text-align:center"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">上一篇漫谈介绍了在通过</span><span class="SpellE"><span lang="EN-US">execve</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">系统调用启动一个</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">格式的目标映像时发生于</span><span lang="EN-US">Linux</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">内核中的活动。简而言之，内核根据映像头部所提供的信息把目标映像映射到</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">装入</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">当前进程用户空间的某个位置上；并且，如果目标映像需要使用共享库的话，还要</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">根据映像头部所提供的信息</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">将所需的“解释器”的映像也映射到用户空间的某个位置上，然后在从系统调用返回用户空间的时候就“返回”到解释器的入口，下面就是解释器的事了。如果目标映像不使用共享库，那么问题就比较简单，返回用户空间的时候就直接“返回”到目标映像的入口。现代的应用软件一般都要使用共享库，所以我们把这当作常态，而把不使用共享库的应用软件作为一种简化了的特例。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像装入用户空间的位置有些是固定的、在编译连接时就确定好了的；有些则是“浮动”的、可以在装入时动态决定；具体要看编译时是否使用了</span><span lang="EN-US">-<span class="SpellE">fPIC</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">选项。一般应用软件主体的映像都是固定地址的，而共享库映像的装入地址都是浮动的。特别地，解释器映像的装入地址也是浮动的。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span lang="EN-US">2</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">．</span><b><span lang="EN-US">ELF</span></b><b><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像的结构</span></b></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">每个操作系统对于在其内核上运行的可执行程序二进制映像都有特定的要求和规定，包括例如映像的格式，映像在用户空间的布局</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">程序段、数据段、堆栈段的划分等等</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，映像装入用户空间的地址是否可以浮动、以及如何浮动，是否支持动态连接、以及如何连接，如何进行系统调用，等等。这些要求和规定合在一起就构成了具体操作系统的“应用</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">软件</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">二进制界面</span><span lang="EN-US">(Application Binary Interface)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">”，缩写成</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。显然，</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是二进制映像的“生产者”即编译</span><span lang="EN-US">/</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">连接工具和使用者即映像装入</span><span lang="EN-US">/</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">启动手段之间的一组约定。而我们一般所说的二进制映像格式，实际上并不仅仅是指字面意义上的、类似于数据结构定义那样的“格式”，还包括了跟映像装入过程有关的其它约定。所以，二进制映像格式是</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的主体。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">目前的</span><span lang="EN-US">Linux ABI</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">是在</span><span lang="EN-US">Unix</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">系统</span><span lang="EN-US">5</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的时期</span><span lang="EN-US">(</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">大约在</span><span class="GramE"><span lang="EN-US">1980</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">年代</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">发展起来的，其主体就是</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，这是“可执行映像和连接格式</span><span lang="EN-US">(Executable and <span class="SpellE">Lnking</span> Format)</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”的缩写。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">读者已经看到，</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">映像文件的开始是个</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">头，这是一个数据结构，结构中有个指针</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">位移量</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，指向文件中的一个“程序头”数组</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">表</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。各个程序<span class="GramE">头表项当然</span>也是数据结构，这是对映像文件中各个“节</span><span lang="EN-US">(Segment)</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”的</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">结构性</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">描述。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">从映像装入的角度看，一个映像是由若干个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">构成的。有些</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">需要被装入、即被映射到用户空间，有些则不需要被装入。在前一篇漫谈中读者已经看到，只有类型为</span><span lang="EN-US">PT_LOAD</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">才需要被装入。所以，映像装入的过程只“管”到</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">为止。而从映像的动态连接、重定位</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">即浮动</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、和启动运行的角度看，则映像是由若干个“段</span><span lang="EN-US">(Section)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">”构成的。我们通常所说映像中的“代码段”、“数据段”等等都是</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。所以，动态连接和启动运行的过程所涉及的则是</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。一般而言，一个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">可以包含多个</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。其实，</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">和</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">都是从操作</span><span lang="EN-US">/</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">处理的角度对映像的划分；对于不同的操作</span><span lang="EN-US">/</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处理，划分的方式也就可以不同。所以，读者在后面将会看到，一个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">里面也可以包含几个别的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，这就是因为它们是按不同的操作</span><span lang="EN-US">/</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处理划分的、不同意义上的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">也是一样。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">在</span><span lang="EN-US">Linux</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">系统中，</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">应用软件主体</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">目标映像本身的装入是由内核负责的，这个过程读者已经看到；而动态连接的过程则由运行于用户空间的“解释器”负责。这里要注意：第一，“解释器”是与具体的映像相<span class="GramE">连系</span>的，其本身也有个映像，也需要被装入。与目标映像相<span class="GramE">连系</span>的“解释器”也是由内核装入的，这<span class="GramE">一点读者</span>也已看到。第二，动态连接的过程包括了共享库映像的装入，那却是由“解释器”在用户空间实现的。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">本来，看了内核中与装入目标映像有关的代码以后，应该接着看“解释器”的代码了。但是后者比前者复杂得多，也繁琐得多，原因是牵涉到许多</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">和</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的原理和细节，所以有必要先对</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">动态连接的原理作一介绍。明白了有关的原理和大致的方法以后，具体的代码实现倒在其次了。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">前面讲过，</span><span lang="EN-US">Linux</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">提供了两个很有用的工具，即</span><span class="SpellE"><span lang="EN-US">readelf</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">和</span><span class="SpellE"><span lang="EN-US">objdump</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。下面就用这两个工具对映像</span><span lang="EN-US">/<span class="SpellE">usr</span>/local/bin/wine</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">进行一番考察，以期在此过程中逐步对</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">和</span><span lang="EN-US">ABI</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">有所了解和理解，这也是进一步阅读、理解“解释器”的代码所需要的。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">我们用命令行“</span><span class="SpellE"><span lang="EN-US">readelf</span></span><span lang="EN-US"> Ca /<span class="SpellE">usr</span>/local/bin/wine</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”和“</span><span class="SpellE"><span lang="EN-US">objdump</span></span><span lang="EN-US"> Cd /<span class="SpellE">usr</span>/local/bin/wine</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”产生两个文件</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">把结果重定向到文件中</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，然后察看这两个文件的部分内容。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">首先是目标映像的</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">头：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">ELF Header:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Magic:<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="7" unitname="F" w:st="on">7f</st1:chmetcnv> 45 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="4" unitname="C" w:st="on">4c</st1:chmetcnv>
46 01 <span class="SpellE">01</span> <span class="SpellE">01</span> 00 <span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span>
<span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span>
<span class="SpellE">00</span> <span class="SpellE">00</span> <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Class:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>ELF32<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Data:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>2's complement, little <span class="SpellE">endian</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>1 (current)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>OS/ABI:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>UNIX - System V<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>ABI Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Type:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>EXEC (Executable file)</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Machine:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Intel 80386<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Entry point address:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>0x8048750</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><b>Start of program headers</b>:<span style="mso-spacerun:yes">&nbsp; </span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>52
(bytes into file)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><b>Start of section headers</b>:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>114904 (bytes into file)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Flags:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of this header:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>52 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of program headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>32 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Number of program headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>6<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of section headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>40 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Number of section headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>36<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Section header string table index: 33<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这就是映像文件开头处的</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">头，其最初</span><span lang="EN-US">4</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个字节为‘</span><span lang="EN-US">0x7f</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">’、和‘</span><span lang="EN-US">E</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">’、‘</span><span lang="EN-US">L</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">’、‘</span><span lang="EN-US">F</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">’。从其余字段中我们可以看出：</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US">OS</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是</span><span lang="EN-US">Unix</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">、其实是</span><span lang="EN-US">Linux</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、而</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是系统</span><span lang="EN-US">5</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">。</span><span lang="EN-US">ABI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的版本号为</span><span lang="EN-US">0</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US">CPU</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">为</span><span lang="EN-US">x86</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像的类型为</span><span lang="EN-US">EXEC</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，即带有主函数</span><span lang="EN-US">main()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的应用软件映像</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">若是共享库<span class="GramE">则类型</span>为</span><span style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt;mso-ansi-language:ZH-CN">DYN</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt;mso-ansi-language:ZH-CN">、即动态连接库)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像的程序入口地址为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">0x8048750</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">。如前所述，</span><span lang="EN-US">EXEC</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像的装入地址是固定的、不能浮动。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">程序头数组起点在文件中的位移为</span><span lang="EN-US">52(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">字节</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，而</span><span lang="EN-US">ELF</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">头的大小正好也是</span><span lang="EN-US">52</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，所以紧接</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">头的后面就是程序头数组。数组的大小为</span><span lang="EN-US">6</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，即映像中有</span><span lang="EN-US">6</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l9 level1 lfo10;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">头的数组则一直在后面<span class="GramE">位移位</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">114904</span><span style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的地方</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，映像中有</span><span lang="EN-US">36</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">于是，我们接下去看程序头数组：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Program
Headers:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Offset<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">VirtAddr</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">PhysAddr</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">FileSiz</span> <span class="SpellE"><span class="GramE">MemSiz</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span><span class="SpellE">Flg</span></span>
Align<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>PHDR<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x000034 0x08048034 <span class="SpellE">0x08048034</span> 0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">000c</st1:chmetcnv>0 <span class="SpellE">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">000c</st1:chmetcnv>0</span> R E 0x4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>INTERP<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="F" w:st="on">0000f</st1:chmetcnv>4 0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80480" unitname="F" w:st="on">080480f</st1:chmetcnv>4 <span class="SpellE">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80480" unitname="F" w:st="on">080480f</st1:chmetcnv>4</span> 0x00013 <span class="SpellE">0x00013</span> R<span style="mso-spacerun:yes">&nbsp;&nbsp;
</span>0x1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[Requesting
program interpreter: /lib/ld-linux.so.2]<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>LOAD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x000000 0x08048000 <span class="SpellE">0x08048000</span> 0x011cc <span class="SpellE">0x011cc</span> R E 0x1000<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>LOAD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0011cc 0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1cc
<span class="SpellE">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1cc</span>
0x00158 0x00160 <span class="GramE">RW<span style="mso-spacerun:yes">&nbsp;
</span>0x1000</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>DYNAMIC<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0011d8 0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1d8
<span class="SpellE">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1d8</span>
0x000d8 <span class="SpellE">0x000d8</span> <span class="GramE">RW<span style="mso-spacerun:yes">&nbsp; </span>0x4</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>NOTE<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x000108 0x08048108 <span class="SpellE">0x08048108</span> 0x00020 <span class="SpellE">0x00020</span> R<span style="mso-spacerun:yes">&nbsp;&nbsp;
</span>0x4<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">一个程序头就是关于一个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的说明，所以这就是</span><span lang="EN-US">6</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。第一个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的类型是</span><span lang="EN-US">PHDR</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，在文件中的位移为</span><span lang="EN-US">0x34</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、即</span><span lang="EN-US">52</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，这就是程序头数组本身。其大小为</span><span lang="EN-US">0xc0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、即</span><span lang="EN-US">192</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。前面说每个程序头的大小为</span><span lang="EN-US">32</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">字节，而</span><span lang="EN-US">6 X 32 = 192</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。第二个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的类型是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">INTERP</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">，即“解释器”的文件<span lang="EN-US">/</span>路径名，是个字符串，这里说是“</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">/lib/ld-linux.so<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue=".2" unitname="”" w:st="on">.2<span lang="EN-US" style="font-family:宋体;mso-hansi-font-family:
 &quot;Times New Roman&quot;"><span lang="EN-US">”</span></span></st1:chmetcnv><span lang="EN-US" style="font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;">。<o:p></o:p></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">下面是两个类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">LOAD</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。如前所述，只有这种类型的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">才需要装入。但是，看一下前者的说明，其起点在文件中的位移是</span><span lang="EN-US">0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，大小是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x011cc</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">，显然是把</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">ELF</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">头和前两个</span><span lang="EN-US">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">也包含在里面了。再看后者</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，其起点的位移是</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">0x011cc</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">，所以是和前者连在一起的；其大小为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">0x158</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，这样两个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">合在一起是从<span lang="EN-US">0</span>到</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x1324</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。计算一下就可知道，实际上是把所有的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">都包括进去了。所以，对于这个特定的映像，说是只装入类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">LOAD</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，实际上装入的却是整个映像。那么，映像中的什么内容可以不必装入呢？例如</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">bss</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">段，那是无初始内容的数据段，就不用装入；还有<span lang="EN-US">(</span>与动态连接无关的<span lang="EN-US">)</span>符号表，那也不需要装入。注意两个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">LOAD</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">类</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的边界</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">(Alignment)</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">都是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">0x1000</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，即<span lang="EN-US">4KB</span>，那正好是存储页面的大小。还有个问题，既然两个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">LOAD</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">类的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">是连续的，那为什么不合并成一个呢？看一下它们的特性标志位就可以知道，第一个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的映像是可读可执行、但是不可写；第二个则是可读可写、但是不可执行，这当然不能合并。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">再往下看，下一个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的类型是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">DYNAMIC</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">，那就是跟动态连接有关的信息。如上所述，这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">其实是包含在前一个</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">中的，所以也会被装入。最后一个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的类型是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">NOTE</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">，那只是注释、说明一类的信息了。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">当然，跟动态连接有关的信息是我们最为关心的，所以我们看一下这个</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">的具体内容：<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Dynamic
segment at offset 0x11d8 contains 22 entries:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Tag<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Name/Value<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000001 (NEEDED)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Shared library: [libwine.so.1]<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000001 (NEEDED)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Shared library: [libpthread.so.0]<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000001 (NEEDED)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Shared library: [libc.so.6]<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">0000000c</st1:chmetcnv>
(INIT)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x80485e8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x0000000d (FINI)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x8049028<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000004 (HASH)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x8048128<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000005 (STRTAB)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x8048368<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000006 (SYMTAB)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x80481d8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="a" w:st="on">0000000a</st1:chmetcnv>
(STRSZ)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>301 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x0000000b (SYMENT)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>16 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000015 (DEBUG)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000003 (PLTGOT)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>4</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000002 (PLTRELSZ)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>160 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000014 (PLTREL)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>REL<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000017 (JMPREL)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x8048548<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000011 (REL)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x8048538<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000012 (RELSZ)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>16 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000013 (RELENT)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x6ffffffe (VERNEED)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80484" unitname="C" w:st="on">80484c</st1:chmetcnv>8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x6fffffff (VERNEEDNUM)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>3<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x6ffffff0 (VERSYM)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>0x8048496<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>0x00000000 (NULL)<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中有<span lang="EN-US">22</span>项数据，开头几项类型为</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">NEEDED</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的数据是我们此刻最为关心的，因为这些数据告诉了我们目标映像要求装入那一些共享库，例如</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">libwine.so.1</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。读者已经看过内核怎样装入用户空间映像，解释器只不过是在用户空间做同样的事，所以共享库的装入对于读者并不复杂，问题是怎样实现动态连接，这是我后面要着重讲的。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">前面说过，</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">是从映像装入角度考虑的划分，</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">才是从连接<span lang="EN-US">/</span>启动角度考虑的划分，现在我们就来看</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。先看</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">与</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的对应关系：<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Section to
Segment mapping:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Segment Sections...<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>01<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>.<span class="SpellE">interp</span>
<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>02<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>.<span class="SpellE">interp</span>
.<span class="SpellE">note.ABI</span>-tag .hash .<span class="SpellE">dynsym</span>
.<span class="SpellE">dynstr</span> .<span class="SpellE">gnu.version</span> .<span class="SpellE">gnu.version_r</span> <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="SpellE">rel.dyn</span> .<span class="SpellE">rel.plt</span> .init .<span class="SpellE">plt</span> .text .<span class="SpellE">fini</span> .<span class="SpellE">rodata</span> .<span class="SpellE">eh_frame</span> <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>03<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>.data .dynamic .<span class="SpellE">ctors</span> .<span class="SpellE">dtors</span> .<span class="SpellE">jcr</span>
.got .<span class="SpellE">bss</span> <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">04<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>.dynamic</span> <o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">05<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>.<span class="SpellE">note.ABI</span>-tag</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的名称都以</span><span class="GramE"><span lang="EN-US">’</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US">’</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">开头，例如</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">interp</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">；名</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">称中间也可以有</span><span class="GramE"><span lang="EN-US">’</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US">’</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，例如</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">rel</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">dyn</span></span><span style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这说明，</span><span lang="EN-US">Segment 0</span><span class="GramE"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">不</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">含有任何</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，因为这就是程序头数组。</span><span lang="EN-US">Segment 1</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">只含有一个</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，那就是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">interp</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，即解释器的文件<span lang="EN-US">/</span>路径名。而</span><span lang="EN-US">Segment 2</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">所包含的</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">就多了。而且，这个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">还包含了前面两个</span><span class="SpellE"><span lang="EN-US">Segmrnt</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，所以</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">interp</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">又同时出现在这个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中。余类推。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">前面</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">头中说一共有</span><span lang="EN-US">36</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，下面就是一份清单：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Section
Headers:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[Nr] Name<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">Addr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">Off</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Size<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>ES <span class="SpellE">Flg</span> <span class="SpellE">Lk</span> <span class="SpellE">Inf</span> Al<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 0</span>]<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>NULL<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 000000 <span class="SpellE">000000</span> 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span><span class="SpellE">0</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 1</span>] .<span class="SpellE">interp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80480" unitname="F" w:st="on">080480f</st1:chmetcnv>4 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="F" w:st="on">0000f</st1:chmetcnv>4 000013 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 2</span>] .<span class="SpellE">note.ABI</span>-tag<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>NOTE<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048108 000108 000020 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 3</span>] .hash<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">HASH</span> <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>08048128
000128 0000b0 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="4" unitname="a" w:st="on">04<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>4<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 4</span>] .<span class="SpellE"><b>dynsym</b></span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">DYNSYM</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>080481d8 0001d8 000190 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="10" unitname="a" w:st="on">10<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>5<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 5</span>] .<span class="SpellE">dynstr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>STRTAB<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048368 000368 00012d <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 6</span>] .<span class="SpellE">gnu.version</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>VERSYM<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048496 000496 000032 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="2" unitname="a" w:st="on">02<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>4<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp; </span>2<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 7</span>] .<span class="SpellE">gnu.version_r</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>VERNEED<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80484" unitname="C" w:st="on">080484c</st1:chmetcnv>8 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="4" unitname="C" w:st="on">0004c</st1:chmetcnv>8 000070 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>5<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 8</span>] .<span class="SpellE">rel.dyn</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>REL<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048538 000538 000010 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="8" unitname="a" w:st="on">08<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>4<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 9</span>] .<span class="SpellE">rel.plt</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>REL<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048548 000548 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="a" w:st="on">0000a</st1:chmetcnv>0 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="8" unitname="a" w:st="on">08<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>4<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>b<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[10] .init<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>080485e8 0005e8 000017 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>AX</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[11] .<span class="SpellE"><b>plt</b></span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>08048600</b>
000600 <b>000150</b> <span class="GramE">04<span style="mso-spacerun:yes">&nbsp;
</span>AX</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[12] .text<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08048750 000750 0008d8 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>AX</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[13] .<span class="SpellE">fini</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08049028 001028 00001b <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>AX</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[14] .<span class="SpellE">rodata</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>08049060 001060 000166 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">A</span></st1:chmetcnv><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>0</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span> 32<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[15] .<span class="SpellE">eh_frame</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="80491" unitname="C" w:st="on">080491c</st1:chmetcnv>8 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="11" unitname="C" w:st="on">0011c</st1:chmetcnv>8 000004 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">A</span></st1:chmetcnv><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>0</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span>[16] .data<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1cc 0011cc <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">00000c</st1:chmetcnv> <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[17] .dynamic<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">DYNAMIC</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>1d8 0011d8 0000d8 <span class="GramE">08<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>5<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[18] .<span class="SpellE">ctors</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>2b0 0012b0 000008 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[19] .<span class="SpellE">dtors</span> <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>2b8 0012b8 000008 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[20] .<span class="SpellE">jcr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>0
<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="12" unitname="C" w:st="on">0012c</st1:chmetcnv>0 000004 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[21] .<b>got</b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><b>0804a</b></st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on"><b>2c</b></st1:chmetcnv><b>4</b> <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="12" unitname="C" w:st="on">0012c</st1:chmetcnv>4
<b>000060</b> <span class="GramE">04<span style="mso-spacerun:yes">&nbsp;
</span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[22] .<span class="SpellE">bss</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NOBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>324 001324 000008 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[23] .stab<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 001324 004878 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">0c</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>24<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">0<span style="mso-spacerun:yes">&nbsp; </span>4</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[24] .<span class="SpellE">stabstr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>STRTAB<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 005b<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="9" unitname="C" w:st="on">9c</st1:chmetcnv>
014cd4 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[25] .comment<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>00000000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="1" unitname="a" w:st="on">01a</st1:chmetcnv>870 000165 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[26] .<span class="SpellE">debug_aranges</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="1" unitname="a" w:st="on">01a</st1:chmetcnv>9d8
000078 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>8</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[27] .<span class="SpellE">debug_pubnames</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01aa50 000025 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[28] .<span class="SpellE">debug_info</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01aa75 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="a" w:st="on">000a</st1:chmetcnv>98
00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[29] .<span class="SpellE">debug_abbrev</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01b50d 000138 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[30] .<span class="SpellE">debug_line</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01b645 000284 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[31] .<span class="SpellE">debug_frame</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01b8cc 000014 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>4</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[32] .<span class="SpellE">debug_str</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01b8e0 0006be <span class="GramE">01<span style="mso-spacerun:yes">&nbsp; </span>MS</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[33] .<span class="SpellE">shstrtab</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>STRTAB<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01bf9e <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="13" unitname="a" w:st="on">00013a</st1:chmetcnv>
00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[34] .<span class="SpellE">symtab</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">SYMTAB</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="1" unitname="C" w:st="on">01c</st1:chmetcnv>678
000890 10<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">35<span style="mso-spacerun:yes">&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="5" unitname="C" w:st="on">5c</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp;
</span></span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[35] .<span class="SpellE">strtab</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">STRTAB</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 01cf08 0005db 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">0</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>1</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Key to Flags:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>W (write), A (<span class="SpellE">alloc</span>),
X (execute), M (merge), S (strings)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>I (info), L (link order), G (group), x
(unknown)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>O (extra OS processing required) o (OS
specific), p (processor specific)<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">这是按</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的名称列出的，其中跟动态连接有关的</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">也出现在前面名为</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">Dynamic</span><span style="font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中，只是在那里是按类型列出的</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。例如，前面类型为</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">HASH</span><span style="font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的表项说与此有关的信息在</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x8048128</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">处，而这里则说有个名为</span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">hash</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，其起始地址为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x8048128</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。还有，</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">前面类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">PLTGOT</span><span style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的表项说与此有关的信息在</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>4</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">处，这里则说有个名为</span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">got</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，其起始地址为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>4</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，不过</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">表中提供的信息更加详细一些，有些信息则互相补充。在</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">表中，只要类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">PROGBITS</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，就说明这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">的内容都来自映像文件，反之类型为</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">NOBITS</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">就说明这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的内容并非</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">来自映像文件。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">有些</span><span lang="EN-US">Section</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">名是读者本来就知道的，例如</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">text</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US">bss</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">；有些则从它们的名称就可猜测出来，例如</span><span lang="EN-US" style="font-family:
宋体">.</span><span class="SpellE"><span lang="EN-US">symtab</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是符号表、</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">rodata</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是只读数据、还有</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">comment</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">和</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">debug_info</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">等等</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。还有一些可能就不知道了，这里择其要者先作些简略的介绍：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">hash</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。为便于根据函数<span lang="EN-US">/</span>变量名找到有关的符号表项，需要对函数<span lang="EN-US">/</span>变量名进行</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">hash</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">计算，并根据计算<span class="GramE">值建立</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">hash</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">队列。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">dynsym</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。需要加以动态连接的符号表，类似于内核模块中的<span lang="EN-US">INPORT</span>符号表。这是动态连接符号表的数据结构部分，须与<span lang="EN-US">.</span></span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">dynstr</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">联用。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">dynstr</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。动态连接符号表的字符串部分，与<span lang="EN-US">.</span></span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">dynsym</span></span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">联用</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">。</span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">rel</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">dyn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。用于动态连接的重定位信息。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">rel</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">plt</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。一个结构数组，其中的每个元素都代表着<span lang="EN-US">GOP</span>表中的一个表项<span class="SpellE"><span lang="EN-US">GOTn</span></span><span lang="EN-US">(</span>见下<span lang="EN-US">)</span>。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">init</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。在进入</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">main()</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">之前执行的代码在这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">中。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">plt</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。“过程连接表<span lang="EN-US">(</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Procedure Linking Table</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">”，见后。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">fini</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。从</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">main()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">返回之后执行的代码在这个</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">中，最后会调用</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">exit()</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">ctors</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。表示“</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Constructor</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">”，是一个函数指针数组，这些函数需要在程序初始化阶段</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">(</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">进入</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">main()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">之前，在</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">init</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">加以调用。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">dtors</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。表示“<span class="SpellE"><span lang="EN-US">Di</span><span lang="EN-US" style="font-family:
&quot;Times New Roman&quot;">structor</span></span></span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">”，也是一个函数指针数组，这些函数需要在程序扫尾阶段</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">(</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">从</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">main()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">返回之后，在</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">fini</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">加以调用。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">got</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。“全局位移表<span lang="EN-US">(</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Global Offset Table</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">”，见后。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:-21.0pt;mso-list:l2 level1 lfo11;
tab-stops:list 21.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">strtab</span></span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。与符号表有关的字符串都集中在这个</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">中。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">其中我们最关心的是</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">“过程连接表<span lang="EN-US">(</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Procedure Linking Table</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">”</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">PLT</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">和“全局位移表<span lang="EN-US">(</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">Global Offset Table</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">”</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">GOT</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">。程序之间的动态连接就是通过这两个<span class="GramE">表实现</span>的。<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">下面我们通过一个实例来说明</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">程序之间的动态连接。目标映像</span><span lang="EN-US">/<span class="SpellE">usr</span>/local/bin/wine</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US">main()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">函数中调用了一个库函数</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，这个函数在</span><span lang="EN-US">C</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">语言共享库</span><span lang="EN-US">libc.so.6</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中。下面是</span><span lang="EN-US">main()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">经编译</span><span lang="EN-US">/</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">连接以后的汇编代码：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">08048ce0
&lt;main&gt;:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048ce0:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>55<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>%<span class="SpellE">ebp</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048ce1:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>89
e5<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span><span class="SpellE">mov</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%<span class="SpellE">esp<span class="GramE">,%</span>ebp</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048cef:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>68
20 91 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x8049120<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048cf4:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>e8
<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="47" unitname="F" w:st="on">47 f</st1:chmetcnv>9 ff <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>call<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>8048640 &lt;_init+0x58&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">本来，这里</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令机器代码的后</span><span lang="EN-US">4</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个字节应该是目标函数</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的入口地址。可是，这个目标函数在共享库</span><span lang="EN-US">libc.so.6</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中，而这个共享库的装入地址是浮动的，要到装入了以后才能知道其地址。怎么办？一个不必很有天分的人就能想到的简单办法是：编译时先让这条</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令空着，但是创建一个带有字符串“</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”的数据结构，并让这个数据结构中有个指针反过来指向这条</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令；而在动态连接时，则让“解释器”在共享库的导出符号表中寻找这个符号，找到后根据其装入后的位置计算出应该填入这条</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令的数值，再把结果填写到这里的</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令中、即地址为</span><span lang="EN-US">0x8048cf5</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的地方。当然，程序中调用</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的地方可能不止一个，所以在调用者的映像中需要把所有调用</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的地方都记下来。然而，不幸的是这样的地方可能成百上千，而类似于</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">这样由共享<span class="GramE">库提供</span>的函数也可能成百上千。更何况一个共享<span class="GramE">库可能</span>还要用到别的共享库，从而形成一个多层次的共享库“图”。这样一来，动态连接的效率就大成问题了，显然这不是个好办法。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">那么实际采用的办法是什么样的呢？这里的</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令采用的是相对寻址，调用的子程序入口地址为</span><span lang="EN-US">0x8048640</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，<span class="GramE">我们就循着</span>这个地址看过去：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">8048640:<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>ff 25 dc a2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">8048646:<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>68 18 00 <span class="SpellE">00</span>
<span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x18<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">804864b:<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>e9 b0 ff <span class="SpellE">ff</span>
<span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>8048600 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这就已经在</span><span lang="EN-US">wine</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">映像的</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表中了，这几条指令就构成</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">在</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的表项，程序中凡是对</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的调用都先来到这里。当然，</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表中有许多这样的表项，对应着许多需要通过动态连接引入的函数，凡是这样的表项都以</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表示之。所有的</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">都是相似的，但是</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">表中的第一个表项、即</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、却是特殊的：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">08048600 &lt;.<span class="SpellE">plt</span>&gt;:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048600:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="35" unitname="C" w:st="on">35 c</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="8" unitname="a" w:st="on">8 a</st1:chmetcnv>2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE"><b>pushl</b></span></span><span class="GramE"><b><span style="mso-spacerun:yes">&nbsp; </span>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>8</b></span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048606:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
25 cc a2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2cc</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804860" unitname="C" w:st="on">804860c</st1:chmetcnv>:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>00 <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>add<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%al<span class="GramE">,(</span>%<span class="SpellE">eax</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>804860e:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>00
<span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>add<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%al<span class="GramE">,(</span>%<span class="SpellE">eax</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048610:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
25 d<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">0 a</st1:chmetcnv>2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2d0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048616:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>68
00 <span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>804861b:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>e9
e0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>8048600 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048620:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
25 d<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="4" unitname="a" w:st="on">4 a</st1:chmetcnv>2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2d4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048626:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>68
08 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>804862b:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>e9
d0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>8048600 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048630:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
25 d<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="8" unitname="a" w:st="on">8 a</st1:chmetcnv>2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2d8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048636:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>68
10 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x10<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>804863b:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>e<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="9" unitname="C" w:st="on">9 c</st1:chmetcnv>0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>8048600 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048640:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>ff
25 dc a2 04 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>8048646:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>68
18 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><b>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x18</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>804864b:<span style="mso-tab-count:1">&nbsp;&nbsp; </span>e9
b0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>8048600</b>
&lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>.
. . . . .</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">可以看出，除</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">以外，所有的</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的形式都是一样的，而且最后的</span><span class="SpellE"><span lang="EN-US">jmp</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">指令都是以</span><span lang="EN-US">0x8048600</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">、即</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">为目标，所不同的只是第一条</span><span class="SpellE"><span lang="EN-US">jmp</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">指令的目标和</span><span lang="EN-US">push</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令中的数据。</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">则与之不同，但是包括</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">在内的每个表项都占</span><span lang="EN-US">16</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个字节，所以整个</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">就像是个数组。其实</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">只需要</span><span lang="EN-US">12</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">个字节，但是为了大小划一而补了</span><span lang="EN-US">4</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">个字节的</span><span lang="EN-US">0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">注意每个</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的第一条</span><span class="SpellE"><span lang="EN-US">jmp</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">指令是间接寻址的。以</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的表项为例，是以地址</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">处的内容为目标地址进行跳转。这样，只要把</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">装入用户空间后的入口地址填写在</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">处，就可以实现正确的跳转，即实现了与共享库中函数</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的动态连接。这样，对于共享库函数的每次调用，额外的消耗只是执行一条间接寻址的</span><span class="SpellE"><span lang="EN-US">jmp</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">指令所需的时间。另一方面，这是不涉及堆栈的跳转指令，堆栈的内容在跳转的过程中保持不变，所以当</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">执行</span><span lang="EN-US">ret</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">指令返回时就直接回到了调用它的地方，在这里是前面的</span><span lang="EN-US">main()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">中。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">由此可见，解释器的任务就是事先把</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">装入用户空间后的入口地址填写在</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">处。不仅是</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，共享<span class="GramE">库提供</span>的库函数可能有很多，对于每个这样的库函数都得保存一个用于间接寻址跳转的指针。保存这些指针的地方就是</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">。与</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">相对应，每个</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">在</span><span lang="EN-US">GOT</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中都有个相应的</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，但是每个</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">只是一个函数指针。同样，</span><span lang="EN-US">GOT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">也是特殊的，而且</span><span lang="EN-US">GOT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的大小也不一样，有</span><span lang="EN-US">12</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">个字节，相当于三个</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">那么大。在“解释器”</span><span lang="EN-US">ld-<span class="SpellE">linux.so</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的代码中把</span><span lang="EN-US">GOT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的三个长字表示成</span><span lang="EN-US">got[0]</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US">got[1]</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、和</span><span lang="EN-US">got[2]</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，注意不要跟</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">相混淆。显然、解释器负有正确设置所有</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的责任。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">既然如此，每个</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中只要一条指令就行了，代码中为什么有三条呢？还有，</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">和</span><span lang="EN-US">GOT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">又是干什么用的呢？原来，那都是为实现“懒惰式”的动态连接、即“懒连接”而存在的。简而言之，“懒连接”就是解释器并不事先完成对共享库函数的动态连接、即不事先设置</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">、而把对具体共享库函数的动态连接拖延到真正要用的时候才来进行，需要用哪一个函数就连接哪一个函数，绝不“积极主动”，以免劳而无功。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">然而，要是不事先设置好</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的内容，</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">间接寻址</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">跳转指令会跳到什么地方去？这要看</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的原始内容，这内容来自目标映像</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">对外进行库函数调用的映像</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">我们看</span><span lang="EN-US">wine</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">映像所提供的</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">原始内容。这个映像的</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">起始地址为</span><span lang="EN-US">0x</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
 0pt">0804a</span></st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">2c</span></st1:chmetcnv><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">4</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，跳过</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">GOT0</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">12</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">个字节，</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">GOTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">是从</span><span lang="EN-US">0x</span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
 0pt">0804a</span></st1:chmetcnv><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">2d0</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">开始的：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Relocation
section '.<span class="SpellE">rel.plt</span>' at offset 0x548 contains 20
entries:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span>Offset<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>Info<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE"><span class="GramE">Sym.Value</span></span><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>Sym</span>. Name<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0804a</span></span></st1:chmetcnv><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">2d0<span style="mso-spacerun:yes">&nbsp; </span>00000107</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> R_386_JUMP_SLOT<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>08048610<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">strchr</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0804a</span></span></st1:chmetcnv><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">2d4<span style="mso-spacerun:yes">&nbsp; </span>00000207</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> R_386_JUMP_SLOT<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>08048620<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">getpid</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0804a</span></span></st1:chmetcnv><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">2d8<span style="mso-spacerun:yes">&nbsp; </span>00000307</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> R_386_JUMP_SLOT<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>08048630<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">fprintf</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span class="GramE"><b><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0804a</span></b></span></st1:chmetcnv><span class="GramE"><b><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">2dc</span></b><span lang="EN-US" style="font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>00000407</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> R_386_JUMP_SLOT<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><b>08048640</b><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE"><b>getenv</b></span><o:p></o:p></span></p>

<p class="MsoNormal"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on"><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0804a</span></span></st1:chmetcnv><span class="GramE"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">2e0<span style="mso-spacerun:yes">&nbsp; </span>00000507</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> R_386_JUMP_SLOT<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>08048650<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">pthread_create</span></span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;</span></span><span lang="EN-US" style="font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">. . . . . .</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">从这里地址为</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>2dc</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的这一表项看，似乎这个指针所指向的是</span><span lang="EN-US">0x08048640</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，这正是指令“</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">jmp</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"> *0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”所在的位置。设想如果</span><span lang="EN-US">CPU</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">在尚未完成对</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的动态连接之前就调用了这个函数，从而在</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中执行了指令“</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">jmp</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"> *0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2dc</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”，那岂不就是执行了一条指向其自身的跳转指令？这可是一个最紧扣的死循环！</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">然而事实并非如此，这里的信息是经过</span><span class="SpellE"><span lang="EN-US">readelf</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">整理的，旨在让使用者知道<span class="GramE">这一表项跟</span></span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表中地址为</span><span lang="EN-US">0x08048640</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的<span class="GramE">表项相对应</span>，并且相应的函数名为</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。这是</span><span class="SpellE"><span lang="EN-US">readel</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">综合了好几方面的信息才形成的报告，不幸的是在有些情况下这就成了很误导的报告。而实际上存储在映像中这个位置上的数据却有所不同。为此，我们通过另一个工具</span><span class="SpellE"><span lang="EN-US">od</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">去观察这个位置上真实的、原始的内容。根据前面关于</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">got</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的信息，地址</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">0x <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>4</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">在映像中的位移是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="12" unitname="C" w:st="on">0012c</st1:chmetcnv>4</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">，所以从</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>2d0</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">开始的几个指针是：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt;mso-ansi-language:
ZH-CN">0012d0 8616 0804 8626 0804 8636 0804 <b>8646 0804</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt;mso-ansi-language:
ZH-CN">0012e0 8656 0804 8666 0804 8676 0804 8686 0804<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">可见，地址</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">0804a</st1:chmetcnv>2dc</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">处的内容其实指向</span><span lang="EN-US">0x08048646</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。这个地址同样在</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表项中，但这是第二条指令“</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">push $0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="18" unitname="”" w:st="on">18<span lang="EN-US" style="mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
 &quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
 1.0pt"><span lang="EN-US">”</span></span></st1:chmetcnv><span lang="EN-US" style="mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:1.0pt">所在的地址。所以，即使在动态连接之前就试图调用</span></span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，至少在这里是不会出问题的。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">回过去看</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">在</span><span lang="EN-US">PLT</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的表项。在执行了“</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">push $0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="18" unitname="”" w:st="on">18<span lang="EN-US" style="mso-bidi-font-size:12.0pt;
 font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
 &quot;Times New Roman&quot;;mso-font-kerning:1.0pt"><span lang="EN-US">”</span></span></st1:chmetcnv><span lang="EN-US" style="mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
1.0pt">以后，下一条指令是“</span><span class="SpellE">jmp</span> 0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="8048600" unitname="”" w:st="on">8048600<span lang="EN-US" style="mso-bidi-font-size:12.0pt;
 font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
 &quot;Times New Roman&quot;;mso-font-kerning:1.0pt"><span lang="EN-US">”</span></span></st1:chmetcnv><span lang="EN-US" style="mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
1.0pt">，这就是</span></span><span lang="EN-US">PLT0</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的起点。注意每个</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表项的最后一条指令都是相同的，都是跳转到</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的起点，所不同的只是压入堆栈的数值，所以这里</span><span lang="EN-US">0x18</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">就代表着</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。另一方面，</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中在</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">之前的几个表项压入堆栈的数值分别为</span><span lang="EN-US">0x0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、</span><span lang="EN-US">0x8</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US">0x10</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，所以</span><span lang="EN-US">0x18</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">表示这是</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的第</span><span lang="EN-US">4</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">个函数。相应地，我们从</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US">dynsym</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容也可以得到验证：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Symbol table
'.<span class="SpellE">dynsym</span>' contains 25 entries:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>Num:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span class="GramE">Value<span style="mso-spacerun:yes">&nbsp; </span>Size</span> Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Bind<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><st1:place w:st="on"><span class="SpellE">Vis</span></st1:place><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">Ndx</span> Name<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>0: 00000000<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>0 <span class="GramE">NOTYPE<span style="mso-spacerun:yes">&nbsp; </span>LOCAL</span><span style="mso-spacerun:yes">&nbsp; </span>DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>1: 08048610<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>359 FUNC<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>GLOBAL <span class="GramE">DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND</span> strchr@GLIBC_2.0 (2)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>2: 08048620<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>8 FUNC<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>GLOBAL <span class="GramE">DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND</span> getpid@GLIBC_2.0 (2)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>3: 08048630<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>23 FUNC<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>GLOBAL <span class="GramE">DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND</span> fprintf@GLIBC_2.0 (2)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>4: <b>08048640</b><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>229 FUNC <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;</span>GLOBAL <span class="GramE">DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND</span> <b>getenv@GLIBC_2.0</b> (2)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>5: 08048650<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>312 FUNC<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>GLOBAL <span class="GramE">DEFAULT<span style="mso-spacerun:yes">&nbsp; </span>UND</span> pthread_create@GLIBC_2.1 (3)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">再看</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，从</span><span class="SpellE"><span lang="EN-US">getenv</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的</span><span lang="EN-US">PLT</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表项跳转到</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">以后，先把地址</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="2" unitname="C" w:st="on">2c</st1:chmetcnv>8</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">处的内容压入堆栈，这就是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">got[1]</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">的内容，是由解释器事先</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">设置好了的，这是一个指向代表着本映像的数据结构的指针。然后又是间接寻址的跳转指令，这次使用的地址是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="804" unitname="a" w:st="on">804a</st1:chmetcnv>2cc</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">，即</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">&amp;got[2]</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，其内容是个指针，也是由解释器事先设置好的，指向一个函数</span><span style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt;mso-ansi-language:ZH-CN">_dl_runtime_resolve()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt;mso-ansi-language:
ZH-CN">，这就是用来实现<span class="GramE">懒</span>连接的函数</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">。注意每次进入</span><span style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt;mso-ansi-language:ZH-CN">_dl_runtime_resolve()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt;mso-ansi-language:
ZH-CN">只完成一个共享库函数的</span><span style="mso-bidi-font-size:10.0pt;font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">懒连接，那就是把目标函数的实际地址填写到相应的</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">GOTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中，并且跳转到这个函数。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">这样，当目标程序对外调用某个共享库函数时，如果对该函数的动态连接业已完成，那么</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">CPU</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">通过相应的</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">PLTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">表项和</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">GOTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">表项进行间接寻址的跳转。而若是在尚未建立连接之前，那就临时实行“懒连接”。此时先后由</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">PLTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">和</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">PLT0</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">压入堆栈的两项数据分别代表着具体的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">(</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">调用者</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">映像和需要调用的具体函数。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">下面就是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_resolve</span>()</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">的事了。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><b><span lang="EN-US">_<span class="SpellE">dl_runtime_resolve</span></span></b><span lang="EN-US">:\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">pushl</span></span> %<span class="SpellE">eax</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span># Preserve registers otherwise clobbered.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">pushl</span></span> %<span class="SpellE">ecx</span>\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">pushl</span></span> %<span class="SpellE">edx</span>\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">movl</span></span> 16(%<span class="SpellE">esp</span>),
%<span class="SpellE">edx</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span># Copy <span class="SpellE">args</span> pushed by PLT in register.<span style="mso-spacerun:yes">&nbsp; </span>Note\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">movl</span></span> 12(%<span class="SpellE">esp</span>),
%<span class="SpellE">eax</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span># that `<span class="SpellE">fixup</span>' takes its parameters in <span class="SpellE">regs</span>.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE"><b>call</b></span><b> <span class="SpellE">fixup</span></b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span># Call <span class="SpellE">resolver</span>.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">popl</span></span> %<span class="SpellE">edx</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span># Get register content back.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">popl</span></span> %<span class="SpellE">ecx</span>\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE"><b>xchgl</b></span></span><b> %<span class="SpellE">eax</span>, (%<span class="SpellE">esp</span>)</b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span># Get %<span class="SpellE">eax</span>
contents end store function address.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">ret</span> $8<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span># Jump to function address.\n\</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">由于前面的三条</span><span lang="EN-US">push</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令，这里的</span><span lang="EN-US">12(%<span class="SpellE">esp</span>)</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">就是</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">所压入的数据结构指针，也就是下面</span><span class="SpellE"><span lang="EN-US">fixup</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的第一个调用参数；而</span><span lang="EN-US">16(%<span class="SpellE">esp</span>)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">就是</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">所压入的目标函数标识</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">位移</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。函数</span><span class="SpellE"><span lang="EN-US">fixup</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">一方面从共享库映像中找到目标函数的入口、并将其填写在</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中，使得下一次再调用同一函数时可以直接从</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">通过间接寻址进入目标函数；一方面通过寄存器</span><span lang="EN-US">%<span class="SpellE">eax</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">返回这个函数指针。然后，指令“</span><span class="SpellE"><span lang="EN-US">xchgl</span></span><span lang="EN-US"> %<span class="SpellE">eax</span>, (%<span class="SpellE">esp</span>)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">”把这个指针交换到了堆栈上。这样一来，下面的“</span><span lang="EN-US">ret $<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="8" unitname="”" w:st="on">8<span lang="EN-US" style="font-family:宋体;mso-ascii-font-family:
 &quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;"><span lang="EN-US">”</span></span></st1:chmetcnv><span lang="EN-US" style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令就使</span>CPU</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">“返回”到了目标函数中，同时又从堆栈上清除了由</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">和</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">压入的两项数据。当</span><span lang="EN-US">CPU</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">进入目标函数时，堆栈上的内容首先是调用点的返回地址，然后是对于目标函数的调用参数，就像目标函数直接受到调用时一样。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">下面是</span><span class="SpellE"><span lang="EN-US">fixup</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的伪代码，有兴趣的读者可以在</span><span lang="EN-US">GLIBC-2.3/elf/dl-runtime.c</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中找到它的源代码。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span class="SpellE"><span class="GramE"><b><span lang="EN-US">fixup</span></b></span></span><span lang="EN-US"> (<span class="SpellE">struct</span> <span class="SpellE">link_map</span>
*map, unsigned <span class="SpellE">reloc_offset</span>)</span></p>

<p class="MsoNormal"><span lang="EN-US">{</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;
</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">在本映像</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">由第一个参数</span><span lang="EN-US">map</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">给定</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中找到其“字符串表”</span><span class="SpellE"><span lang="EN-US">strtab</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;
</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">根据第二个参数</span><span class="SpellE"><span lang="EN-US">reloc_offset</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">在本映像中的</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">和符号表中找到其表项。</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>/* </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">这些表项给出了目标共享库和目标函数的名字。</span><span lang="EN-US"> */</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;
</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">通过</span><span lang="EN-US">_<span class="SpellE">dl_lookup_versioned_symbol</span>()</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">或</span><span lang="EN-US">_<span class="SpellE">dl_lookup_symbol</span>()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">找到目标共享库的映像，</span></p>

<p class="MsoNormal" style="text-indent:31.5pt;mso-char-indent-count:3.0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">并找到目标函数的地址。</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>/* </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">对于</span><span lang="EN-US">x86</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">处理器，</span><span class="SpellE"><span lang="EN-US">elf_machine_plt_value</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">不起作用。</span><span lang="EN-US"> */</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;
</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">通过</span><span class="SpellE"><span lang="EN-US">elf_machine_fixup_plt</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">把目标函数的装入地址填写到本映像</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的相应表项中。</span></p>

<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;
</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">返回目标函数的地址。</span></p>

<p class="MsoNormal"><span lang="EN-US">}</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这整个过程完成了对一个目标函数的懒连接，并且实施了对于目标函数的调用。<span class="GramE">懒</span>连接对于大型的软件往往能节约许多用于动态连接的时间。大型软件就其设计和编程而言常常是面面俱到的，所以在代码中要调用成百上千的共享库子程序，而且一个共享库又可能调用许多别的共享库，把所有这些共享库全都连接好可能很费时间，从而使得软件的启动速度明显变慢。但是，在实际的运行中，却可能只是集中在对一小部分共享库函数的调用，因为有许多共享库函数只是在特殊的条件下才会受到调用。这样，按实际需要进行的懒连接就显出其优越性来了。当然，就具体的函数而言，懒连接所需的时间反倒更长，但是因为需要连接的数量大大减少了，总的消耗就降低了。另一方面，懒连接是分散、零星地进行的，即使所消耗的时间总量不变，也比较不容易被使用者感觉到，因而更能被接受。所以有时候<span class="GramE">懒</span>也有懒的好处。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">总结两种动态连接的库函数调用过程，可以把它们表示为简明的流程如下：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;mso-para-margin-left:1.0gd;
text-indent:21.0pt"><span class="GramE"><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">懒</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">连接：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;mso-para-margin-left:1.0gd;
text-indent:21.0pt"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">调用点</span> <span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span lang="EN-US"> </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span lang="EN-US"> </span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span lang="EN-US">PLT0 </span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span lang="EN-US">GOT0 </span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―〉</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:21.0pt"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_resolve</span>() </span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span class="SpellE"><span lang="EN-US">fixup</span></span><span lang="EN-US">()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span>被调用函数入口</span>
<span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">―<span class="GramE">〉</span>返回调用点</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;mso-para-margin-left:1.0gd;
text-indent:21.0pt"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">完成了动态连接之后：</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;mso-para-margin-left:1.0gd;
text-indent:21.0pt"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">调用点</span> <span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span lang="EN-US"> </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">―<span class="GramE">〉</span></span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span lang="EN-US"> </span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span>被调用函数入口</span> <span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">―<span class="GramE">〉</span>返回调用点</span></p>

<p class="MsoNormal" style="margin-left:10.5pt;mso-para-margin-left:1.0gd;
text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这里所涉及的</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">和</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">都在调用者所在的映像中，</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的原始内容是在编译</span><span lang="EN-US">/</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">连接的过程中生成的，但是</span><span lang="EN-US">GOT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容则要由解释器予以填写，并且</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_resolve</span>()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">和</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">fixup</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">()</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">存在于解释器的映像中。所以，如果没有解释器，无论是正常的动态连接还是<span class="GramE">懒</span>连接都无法实现。</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">顺便还要提一下，按编译时所使用的选项，由解释器设置到</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">got[2]</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中的函数指针也可以不是指向</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_resolve</span>()</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">，而是指向</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_profile</span>()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">；而</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">_<span class="SpellE">dl_runtime_profile</span>()</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">所调用的不是</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">fixup</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，而是</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">profile_fixup</span></span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">()</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">。函数</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">profile_fixup</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">()</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">不但实现<span class="GramE">懒</span>连接，还使得以后每次通过</span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">PLTn/GOTn</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">进行共享库函数调用时可以进行计数，从而统计出对每个共享库函数的调用次数。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">上面说的是从固定地址的目标映像中调用共享库中的子程序。如前所述，从共享库中也可以调用别的共享库中的子程序，此时的过程只是略有不同。下面以共享库</span><span class="SpellE"><span lang="EN-US">libwine.so</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">为例作一些说明。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">先看</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">头：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">ELF Header:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Magic:<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="7" unitname="F" w:st="on">7f</st1:chmetcnv> 45 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="4" unitname="C" w:st="on">4c</st1:chmetcnv>
46 01 <span class="SpellE">01</span> <span class="SpellE">01</span> 00 <span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span>
<span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span>
<span class="SpellE">00</span> <span class="SpellE">00</span> <o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Class:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>ELF32<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Data:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>2's complement, little <span class="SpellE">endian</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>1 (current)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>OS/ABI:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>UNIX - System V<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>ABI Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Type:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>DYN</b> <b>(Shared object file)</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Machine:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Intel 80386<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Version:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Entry point address:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="1" unitname="a" w:st="on">1a</st1:chmetcnv>60</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Start of program headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>52 (bytes into file)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Start of section headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>311932 (bytes into file)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Flags:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of this header:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>52 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of program headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>32 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Number of program headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>3<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Size of section headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>40 (bytes)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Number of section headers:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>32<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>Section header string table index: 29<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">不同之处首先在于映像的类型是</span><span lang="EN-US">DYN</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、表示动态连接库、而不是</span><span lang="EN-US">EXEC</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。另一方面，由于共享库是浮动的，没有固定的装入地址，所以程序入口</span><span lang="EN-US">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="1" unitname="a" w:st="on">1a</st1:chmetcnv>60</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">只是该入口在映像中的位移，而不像前面那样是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x8048750</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">一类的目标地址。至于装入以后到底在什么位置上，那要取决于当时</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">用户空间</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">虚拟地址区间的动态分配。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">Section
Headers:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[Nr] Name<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Type<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">Addr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">Off</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Size<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>ES <span class="SpellE">Flg</span> <span class="SpellE">Lk</span> <span class="SpellE">Inf</span> Al<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 0</span>]<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000000 000000 <span class="SpellE">000000</span> 00<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span><span class="SpellE">0</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 1</span>] .hash<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">HASH</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000094 000094 000428 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="4" unitname="a" w:st="on">04<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>2<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 2</span>] .<span class="SpellE">dynsym</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">DYNSYM</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>000004bc 0004bc 000850 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="10" unitname="a" w:st="on">10<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>3<span style="mso-spacerun:yes">&nbsp;
</span>1d<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span class="GramE">[ 3</span>] .<span class="SpellE">dynstr</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>STRTAB<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00000d<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">0c</st1:chmetcnv> 000d<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">0c</st1:chmetcnv> 0005aa <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>A</st1:chmetcnv><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>1<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[13] .<span class="SpellE">rodata</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00005140 005140 0004ec <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">A</span></st1:chmetcnv><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>0</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span> 32<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[14] .<span class="SpellE">eh_frame</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="562" unitname="C" w:st="on">0000562c</st1:chmetcnv> <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="562" unitname="C" w:st="on">00562c</st1:chmetcnv> 000004 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="0" unitname="a" w:st="on">00<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="GramE">A</span></st1:chmetcnv><span class="GramE"><span style="mso-spacerun:yes">&nbsp; </span>0</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[15] .data<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>00006630</b>
<b>005630</b> 000060 <span class="GramE">00<span style="mso-spacerun:yes">&nbsp;
</span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[16] .dynamic<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="SpellE">DYNAMIC</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>00006690 005690 0000e0 <span class="GramE">08<span style="mso-spacerun:yes">&nbsp; </span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>3 <span style="mso-spacerun:yes">&nbsp;&nbsp;</span>0<span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span>[20] <b>.got</b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROGBITS<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>00006784</b>
005784 000104 <span class="GramE">04<span style="mso-spacerun:yes">&nbsp;
</span>WA</span><span style="mso-spacerun:yes">&nbsp; </span>0<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span class="SpellE">0</span><span style="mso-spacerun:yes">&nbsp; </span>4<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>. . . . . .</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这里</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">以前各项的“地址”与“位移”都是一致的，但是</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">在映像中的位移为</span><span lang="EN-US">0x5630</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">而“地址”为</span><span lang="EN-US">0x6630</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，二者相差</span><span lang="EN-US">0x1000</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，即</span><span lang="EN-US">4K</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">字节、或一个页面。其实这毫不奇怪，只是说在装入用户空间时要在</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US">eh_frame</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的终点与</span><b><span lang="EN-US" style="font-family:宋体">.</span></b><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的起点之间空出一个页面。这里所谓“地址”</span><span lang="EN-US">0x6630</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">是在装入用户空间以后的映像中的位移，而“位移”</span><span lang="EN-US">0x5630</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">是在映像文件中的位移。除此以外，就没有什么特殊的了。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">但是在</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">方面却有些不同。下面是</span><span class="SpellE"><span lang="EN-US">libwine.so</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">00001700 &lt;.<span class="SpellE">plt</span>&gt;:<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1700:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff b3 04 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE"><b>pushl</b></span></span><span class="GramE"><b><span style="mso-spacerun:yes">&nbsp; </span>0x4</b></span><b>(%<span class="SpellE">ebx</span>)</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1706:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff a3 08 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x8(%<span class="SpellE">ebx</span>)</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="170" unitname="C" w:st="on">170c</st1:chmetcnv>:<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>00
<span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>add<span style="mso-spacerun:yes">&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>%al<span class="GramE">,(</span>%<span class="SpellE">eax</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>170e:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>00 <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>add<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%al<span class="GramE">,(</span>%<span class="SpellE">eax</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1710:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff a3 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="0" unitname="C" w:st="on">0c</st1:chmetcnv>
00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*<span class="GramE">0xc(</span>%<span class="SpellE">ebx</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1716:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>68 00 <span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x0<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>171b:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e9 e0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1700 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1720:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff a3 10 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x10(%<span class="SpellE">ebx</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1726:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>68 08 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x8<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>172b:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e9 d0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1700 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1730:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff a3 14 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x14(%<span class="SpellE">ebx</span>)</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1736:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>68 10 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><b>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x10</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>173b:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="9" unitname="C" w:st="on">9 c</st1:chmetcnv>0
ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><b>jmp</b></span><b><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1700 &lt;_init+0x18&gt;</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1740:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>ff a3 18 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>*0x18(%<span class="SpellE">ebx</span>)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1746:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>68 18 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x18<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>174b:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e9 b0 ff <span class="SpellE">ff</span> <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><span class="SpellE">jmp</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>1700 &lt;_init+0x18&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">与前面的</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">作一比较，就可以看到：无论是</span><span lang="EN-US">PLT0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">或</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，在形式上都与前面的一样，只是现在要用到</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">时均须使用基地址加位移的寻址方式。同样是间接寻址，在固定地址的映像中</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的位置是预定的，而在浮动的共享库中则无法预先确定其地址。但是，共享库的</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是共享库映像的一部分，随着共享库映像一起浮动，而</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">与</span><span lang="EN-US">PLT</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">及代码之间的相对位移则保持不变，所以只要使寄存器</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的基地址也一起浮动，就总是可以正确地寻访到</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">。所以这里</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的汇编代码有个前提，就是当通过</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指令进入任何一个</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">时寄存器</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容就是</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的起点。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">那么怎样保证使</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的内容指向</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">呢？我们看一个实例。这一次在使用</span><span class="SpellE"><span lang="EN-US">objdump</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">时加了</span><span lang="EN-US">-S</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">可选项，把编译前的</span><span lang="EN-US">C</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">语言源程序也一起打印出来。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">/* print the
usage message */<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span class="GramE"><span lang="EN-US" style="font-size:
10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:
0pt">static</span></span><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"> void <span class="SpellE">debug_usage</span>(void)<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">{<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e84:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>55<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>%<span class="SpellE">ebp</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e85:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>89 e5<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span><span class="SpellE">mov</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%<span class="SpellE">esp<span class="GramE">,%</span>ebp</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e87:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>53<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>%<span class="SpellE">ebx</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e88:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>83 <span class="SpellE">ec</span> 08<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>sub<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>$0x8<span class="GramE">,%</span>esp<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e8b:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e8 00 <span class="SpellE">00</span> <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><b>call<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>2e90</b> &lt;debug_usage+0xc&gt;<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e90:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>5b<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp; </span><b>pop<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>%<span class="SpellE">ebx</span></b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e91:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="81" unitname="C" w:st="on">81 c</st1:chmetcnv><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="True" sourcevalue="3" unitname="F" w:st="on">3 f</st1:chmetcnv>4 38 00 <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><b>add<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>$0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="38" unitname="F" w:st="on">38f</st1:chmetcnv>4<span class="GramE">,%</span>ebx</b><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span class="GramE">static</span>
const char usage[] =<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>"Syntax of the WINEDEBUG variable<span class="GramE">:\</span>n"<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">"<span style="mso-spacerun:yes">&nbsp; </span>WINEDEBUG</span>=[class]+xxx,[class]-<span class="SpellE">yyy</span>,...\n\n"<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>"Example: WINEDEBUG=+<span class="SpellE">all<span class="GramE">,warn</span></span>-heap\n"<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>"<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span class="GramE">turns</span> on all messages except warning heap messages\n"<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>"Available message classes: err, warn, <span class="SpellE">fixme</span>,
trace\n";<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span class="GramE"><b>write</b>(</span>
2, usage, <span class="SpellE">sizeof</span>(usage) - 1 );<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>2e97:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>68 d7 00 <span class="SpellE">00</span> <span class="SpellE">00</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0xd7<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2e<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="9" unitname="C" w:st="on">9c</st1:chmetcnv>:<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>8d
83 <span class="SpellE">bc</span> <span class="SpellE">ec</span> ff <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span>lea<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span><span class="GramE">0xffffecbc(</span>%<span class="SpellE">ebx</span>),%<span class="SpellE">eax</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2ea2:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>50<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1">&nbsp; </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>%<span class="SpellE">eax</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2ea3:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="6" unitname="a" w:st="on">6a</st1:chmetcnv>
02<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-tab-count:1"> </span>push<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>$0x2<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>2ea5:<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>e8 86 e8 ff <span class="SpellE">ff</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp; </span><b>call<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1730 </b>&lt;_init+0x48&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">这次要调用的函数是</span><span lang="EN-US">write()</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">。这个函数的本身在另一个共享库</span><span class="SpellE"><span lang="EN-US">libc.so</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中，而</span><span class="SpellE"><span lang="EN-US">libwine.so</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像中为调用该函数而设的</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表项则在位移为</span><span lang="EN-US">0x1730</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处。为了在进入</span><span lang="EN-US">PLT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">之前使</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指向</span><span lang="EN-US">GOT</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，这里玩了一个小小的“诡计”。在位移</span><span lang="EN-US">0x2e8b</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处有一条</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指令，这条指令用的是相对寻址，相对位移为</span><span lang="EN-US">0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表明所调用的目标就是它的下一条指令，即位移</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">处的指令。从</span><span lang="EN-US">CPU</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的执行轨迹看，这条指令的执行与否并没有什么影响，因为它的下一条指令本来就在</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处。可是，另一方面，由于是</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指令，堆栈上就有了它的返回地址，那也是</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">（确切地说是映像在用户空间的起点加上位移</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，见下）。所以，这条</span><span lang="EN-US">call</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指令的意图和作用只是把地址</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">放到了堆栈上，接着的</span><span lang="EN-US">pop</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">指令则又把它放到了寄存器</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中。注意真正在运行时放入</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的数值其实并不是</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，而是这个映像在用户空间的起点加上位移</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。这样，就达到了让</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容“水涨船高”的目的。可是这样放入</span><span lang="EN-US">%<span class="SpellE">ebx</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的还只是位移为</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">处在用户空间的实际地址，而不是</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">在用户空间的实际地址，所以接着又在上面加上了二者的差距</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="38" unitname="F" w:st="on">38f</st1:chmetcnv>4</span><span style="mso-bidi-font-size:
10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">。我们不妨算一下：</span><span lang="EN-US">0x2e90</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">加</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">0x<st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="38" unitname="F" w:st="on">38f</st1:chmetcnv>4</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x6784</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，而前面所列</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-font-kerning:
0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:
0pt">got</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">的相对地址恰好是</span><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;mso-font-kerning:0pt">0x6784</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">至于</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">的内容，那些已经完成了动态连接的</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表项所持有的就是指向受调用共享库映像中相应函数的指针，这与固定地址映像中的</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">并无不同，所不同的只是从相应</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中引用这个指针时的寻址方式不同。然而</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中用于<span class="GramE">懒</span>连接的原始内容就有些不同了，下面仍用</span><span class="SpellE"><span lang="EN-US">od</span></span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">观察</span><span class="SpellE"><span lang="EN-US">libwine.so</span></span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映像文件中</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">所在处的原始内容。注意</span><span lang="EN-US">GOT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的起点</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">0x6784</span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">是在装入用户空间以后的映像中的位移，而在映像文件中的位移则为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">0x5784</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">：</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">005780 0000 <span class="SpellE">0000</span> 6690 0000 <span class="SpellE">0000</span> <span class="SpellE">0000</span> <span class="SpellE">0000</span> <span class="SpellE">0000</span><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">005790 1716
0000 1726 0000 <b>1736 0000</b> 1746 0000<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="57" unitname="a" w:st="on"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0057a</span></st1:chmetcnv><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">0 1756 0000 1766 0000 1776 0000 1786 0000<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span lang="EN-US" style="font-size:10.0pt;font-family:
宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">0057b0 1796
0000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="17" unitname="a" w:st="on">17a</st1:chmetcnv>6 0000 17b6 0000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="17" unitname="C" w:st="on">17c</st1:chmetcnv>6 0000<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="57" unitname="C" w:st="on"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
 mso-font-kerning:0pt">0057c</span></st1:chmetcnv><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">0 17d6 0000 17e6 0000 <st1:chmetcnv tcsc="0" numbertype="1" negative="False" hasspace="False" sourcevalue="17" unitname="F" w:st="on">17f</st1:chmetcnv>6 0000 1806 0000<o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="text-align:left;mso-layout-grid-align:
none;text-autospace:none"><span style="font-size:10.0pt;font-family:宋体;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt;mso-ansi-language:
ZH-CN">. . . . . .<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">对于共享库函数</span><span lang="EN-US">write()</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，这里的指针指向</span><span lang="EN-US">0x001736</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，但是那只是相应</span><span class="SpellE"><span lang="EN-US">PLTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的</span><span lang="EN-US">push</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">指令在映像文件中的位移。显然，将映像装入</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">映射到</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">用户空间之后，还需要根据装入的位置对这些指针<span class="GramE">作出</span>调整，这也是由解释器完成的。具体地，这是解释器通过一个函数</span><span lang="EN-US">_<span class="SpellE">dl_relocate_object</span>()</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">完成的。对于装入的每一个共享库，解释器都要通过这个函数对其执行重定位</span><span lang="EN-US">(relocate)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，其中就包括了对其各个</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">表项的重定位。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">最后还要说明，同一个共享库的映像可以同时被映射到多个进程的用户空间。比方说，要是映像中的某个页面此刻存在于某个物理页面，那么这个物理页面就被映射到所有装入了这个共享库的进程中，只是在各个进程中的虚拟地址可能不同</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">但都在用户空间</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。也就是说，一个拷贝为多个进程所共享，所以才叫“共享”库。不过这只是大体上而言，实际的情况还要复杂一些。读者在前面看到，</span><span lang="EN-US">wine</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">映像有两个类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">LOAD</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">。前者的访问权限为可读可执行、但是不可写，这当然可以为多个进程所共享。而后者的访问权限却是可读可写，这就不能由多个进程共享了。所以，凡<span class="GramE">属这个</span></span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的页面，每个有关的进程就各有其自己的物理页面。再看这两个</span><span lang="EN-US">Segment</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中的内容。前者有</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">例如</span><span lang="EN-US">)</span><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt"> </span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">.</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">text</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">和<span lang="EN-US">.</span></span><span class="SpellE"><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">plt</span></span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">等</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-hansi-font-family:&quot;Times New Roman&quot;;
mso-font-kerning:0pt">这是可以理解的，因为<span lang="EN-US">.</span></span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">text</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">是程序代码，这对于所有共享这个程序库的进程都一样；而</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">.<span class="SpellE">plt</span></span><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">就是</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">PLT</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，里面的内容也是对于所有共享这个程序库的进程都一样。再说，这些</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的内容也不会随着程序的运行而改变</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">(</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">不可写</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">)</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。后者的内容则有</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">例如</span><span lang="EN-US">)</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US">bss</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">、</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">got</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">等</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Section</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">。不言而喻，</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">data</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">和</span><span lang="EN-US" style="font-family:宋体">.</span><span class="SpellE"><span lang="EN-US">bss</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中都是数据，当然不能让不同的进程互相干扰，必须得各有各的物理空间。至于</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">got</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容，那也得<span class="GramE">因进程</span>而异。因为这是用来建立动态连接的，但是同一共享库在不同进程中的映射地址却可能不同，从而引起</span><span lang="EN-US" style="font-family:宋体">.</span><span lang="EN-US">got</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的内容也不相同。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">在与别的进程共享程序段等等信息之余，每个进程都需要有些私有的、“本地的”信息，不能与别的进程共享，这是很自然、也比较容易实现的，因为毕竟不同的进程“生活”在不同的空间中。而同在一个空间的若干线程，则一般是不分彼此、“肝胆相照”的。但是，有时候也会需要有些“私房”，特别是在对一些全局量的使用上需要有只属于本线程的拷贝。为了解决这样的问题，就发展起来一种技术称为“线程本地存储</span><span lang="EN-US">(Thread Local Storage)</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">”、即</span><span lang="EN-US">TLS</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">。当然，解释器对于支持</span><span lang="EN-US">TLS</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">的共享库有特殊的处理，这里就不深入进去了。</span></p>

<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">现在读者对</span><span lang="EN-US">ELF</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">动态连接的过程已经有了<span class="GramE">个</span>大致的认识。在此基础上，解释器的作用就可想而知了，大体上就是：</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level1 lfo12;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">检查目标映像<span class="GramE">中类型</span>为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;
mso-font-kerning:0pt">DYNAMIC</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">的</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">Segment</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">，其中每个类型为</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">NEEDED</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">的表项都指定了一个需要用到的共享库。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level1 lfo12;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="mso-bidi-font-size:
10.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
Wingdings;mso-font-kerning:0pt"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="mso-bidi-font-size:10.0pt;
font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;mso-font-kerning:0pt">对于所需的每个共享库，装入该共享库，并根据具体的装入地址对其实行重定位操作，包括修正其</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt">GOT</span><span style="mso-bidi-font-size:10.0pt;font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;mso-font-kerning:0pt">中的原始内容。</span><span lang="EN-US" style="mso-bidi-font-size:10.0pt;mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level1 lfo12;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">如果不是<span class="GramE">懒</span>连接，就根据目标映像的动态符号表对</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">目标映像中</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">每个相应的</span><span class="SpellE"><span lang="EN-US">GOTn</span></span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">表项实施动态连接。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level1 lfo12;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">检查目标映像直接使用的每个</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">一级</span><span lang="EN-US">)</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">共享库，如果又要用到别的</span><span lang="EN-US">(</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">二级</span><span lang="EN-US">)</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">共享库，就对其递归实施上述操作。余类推。</span></p>

<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level1 lfo12;
tab-stops:list 42.0pt"><!--[if !supportLists]--><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">最后转入目标映像的程序入口。</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">至于解释器的具体代码，则一来比较冗长，二来并非我们当务之急，就留待以后<span class="GramE">空一些</span>时候再说吧。</span></p>

</div>




<!--
     FILE ARCHIVED ON 11:33:10 May 04, 2016 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:43:09 Apr 13, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 219.417
  exclusion.robots: 0.151
  exclusion.robots.policy: 0.145
  RedisCDXSource: 14.986
  esindex: 0.006
  LoadShardBlock: 186.951 (3)
  PetaboxLoader3.datanode: 190.377 (4)
  CDXLines.iter: 15.352 (3)
  PetaboxLoader3.resolve: 87.491 (2)
  load_resource: 216.257
--></o:smarttagtype></o:smarttagtype><div id="react-toast" class="Toaster"><span class="Toaster__manager-top-left" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; top: 0px; left: 0px;"></span><span class="Toaster__manager-top" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; margin: 0px auto; text-align: center; top: 0px; right: 0px; left: 0px;"></span><span class="Toaster__manager-top-right" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; top: 0px; right: 0px;"></span><span class="Toaster__manager-bottom-left" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; bottom: 0px; left: 0px;"></span><span class="Toaster__manager-bottom" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; margin: 0px auto; text-align: center; bottom: 0px; right: 0px; left: 0px;"></span><span class="Toaster__manager-bottom-right" style="max-width: 560px; position: fixed; z-index: 5500; pointer-events: none; bottom: 0px; right: 0px;"></span></div><script src="chrome-extension://gppongmhjkpfnbhagpmjfkannfbllamg/js/js.js"></script><script src="chrome-extension://gppongmhjkpfnbhagpmjfkannfbllamg/js/js.js"></script><script src="chrome-extension://gppongmhjkpfnbhagpmjfkannfbllamg/js/js.js"></script></body><div style="all: initial;"><div id="__hcfy__" style="all: initial;"></div></div></html>